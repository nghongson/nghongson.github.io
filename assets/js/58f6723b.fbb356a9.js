"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9367],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>u});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),d=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=d(e.components);return a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),m=d(n),u=r,g=m["".concat(s,".").concat(u)]||m[u]||p[u]||o;return n?a.createElement(g,l(l({ref:t},c),{},{components:n})):a.createElement(g,l({ref:t},c))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var d=2;d<o;d++)l[d]=n[d];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},5300:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>d});var a=n(7462),r=(n(7294),n(3905));const o={},l="Magento 2 Framework",i={unversionedId:"mage2/mage-framework",id:"mage2/mage-framework",title:"Magento 2 Framework",description:"https://www.magentoextensions.org/documentation/hierarchy.html",source:"@site/docs/mage2/mage-framework.md",sourceDirName:"mage2",slug:"/mage2/mage-framework",permalink:"/docs/mage2/mage-framework",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"json-schema",permalink:"/docs/mage2/json-schema"},next:{title:"messages-queue",permalink:"/docs/mage2/messages-queue"}},s={},d=[{value:"Framework highlights",id:"framework-highlights",level:2},{value:"ACL",id:"acl",level:2},{value:"Load User &amp; check ACL allow",id:"load-user--check-acl-allow",level:3},{value:"New ACL",id:"new-acl",level:3},{value:"Restrict admin controllers",id:"restrict-admin-controllers",level:3},{value:"Content restrictions for admin users",id:"content-restrictions-for-admin-users",level:3},{value:"Restrict web API access",id:"restrict-web-api-access",level:3},{value:"Restrict web API menu",id:"restrict-web-api-menu",level:3},{value:"API",id:"api",level:2},{value:"SearchCriteria",id:"searchcriteria",level:3},{value:"Search",id:"search",level:3},{value:"Authorization",id:"authorization",level:2},{value:"Autoload",id:"autoload",level:2},{value:"Archive",id:"archive",level:2},{value:"Async",id:"async",level:2},{value:"Config",id:"config",level:2},{value:"Config xml",id:"config-xml",level:3},{value:"Config schema",id:"config-schema",level:3},{value:"Sensitive config",id:"sensitive-config",level:3},{value:"Environment variables",id:"environment-variables",level:3},{value:"Config on production",id:"config-on-production",level:3},{value:"How to &quot;Create configuration types&quot;",id:"how-to-create-configuration-types",level:3},{value:"Console",id:"console",level:2},{value:"Controller",id:"controller",level:2},{value:"Admin &amp; Frontend",id:"admin--frontend",level:3},{value:"GET, POST, PUSH, DELETE",id:"get-post-push-delete",level:3},{value:"Response data type",id:"response-data-type",level:3},{value:"Convert",id:"convert",level:2},{value:"Cron",id:"cron",level:2},{value:"EntityManager",id:"entitymanager",level:2},{value:"Encryption",id:"encryption",level:2},{value:"Exception",id:"exception",level:2},{value:"Event",id:"event",level:2},{value:"Filter Template",id:"filter-template",level:2},{value:"HTTP",id:"http",level:2},{value:"Message",id:"message",level:2},{value:"ObjectManager",id:"objectmanager",level:2},{value:"Phrase",id:"phrase",level:2},{value:"Logger",id:"logger",level:2},{value:"Search",id:"search-1",level:2},{value:"Shell",id:"shell",level:2},{value:"View - UI",id:"view---ui",level:2},{value:"Multiple Stores",id:"multiple-stores",level:2},{value:"Currentcy",id:"currentcy",level:3},{value:"Locale",id:"locale",level:3},{value:"Files",id:"files",level:2},{value:"FileSystem Driver",id:"filesystem-driver",level:3},{value:"Directory",id:"directory",level:3},{value:"Glob",id:"glob",level:3},{value:"File",id:"file",level:3},{value:"File IO",id:"file-io",level:3},{value:"File upload",id:"file-upload",level:3},{value:"Csv",id:"csv",level:3},{value:"Serializer",id:"serializer",level:2},{value:"Session",id:"session",level:2},{value:"Standard session management",id:"standard-session-management",level:3},{value:"Session handler",id:"session-handler",level:3},{value:"Security",id:"security",level:3},{value:"Logger &amp; Debug session",id:"logger--debug-session",level:3},{value:"URL",id:"url",level:2},{value:"Escaper",id:"escaper",level:2},{value:"Debug &amp; Profiler",id:"debug--profiler",level:2}],c={toc:d};function p(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"magento-2-framework"},"Magento 2 Framework"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://www.magentoextensions.org/documentation/hierarchy.html"},"https://www.magentoextensions.org/documentation/hierarchy.html")),(0,r.kt)("p",null,"The Adobe Commerce and Magento Open Source framework (Commerce framework) controls how application components interact, including request flow, routing, indexing, caching, and exception handling. It provides services that reduce the effort of creating modules that contain business logic, contributing to the goal of both making Commerce code more modular as well as decreasing dependencies"),(0,r.kt)("h2",{id:"framework-highlights"},"Framework highlights"),(0,r.kt)("p",null,"The Commerce framework (lib/internal/Magento/Framework/) provides a robust range of functionality."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"NAMESPACE"),(0,r.kt)("th",{parentName:"tr",align:"left"},"PURPOSE"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Magento\\Framework\\DataObject"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Provides standard functionality for storing and retrieving data through magic methods. This is the base class for many classes")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Magento\\Framework\\Model"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Contains base Model classes that almost all model classes extend from.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Magento\\Framework\\Model\\AbstractModel"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Magento\\Framework\\Model\\ResourceModel\\AbstractResource"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Magento\\Framework\\Controller"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Magento\\Framework\\View"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Contains code to render pages and layouts.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Magento\\Framework\\Data"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Contains additional classes that handle forms.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Magento\\Framework\\Url"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Contains code to look up other pages.")))),(0,r.kt)("p",null,"Other namespaces under Magento\\Framework that will interest extension developers:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"NAMESPACE"),(0,r.kt)("th",{parentName:"tr",align:"left"},"PURPOSE"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Magento\\Framework\\ObjectManager"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Used to provide dependency injection.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Magento\\Framework\\App"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Contains framework code that has knowledge about the Commerce application. This code bootstraps the application and reads in the initial configuration. It also contains the entry point to the command line tools, the web application, and the cron job. And finally, it routes requests while providing the deployment context (such as reading in the configuration for the database configuration, languages, and caching systems).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Magento\\Framework\\Api"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Contains base classes for advanced functionality of extendable objects through the system (that is, objects that can be extended to add new data through Commerce Marketplace extensions).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Magento\\Framework\\Config"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Contains the generic configuration reader. Each config file has its own specialized reader extending these classes.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Magento\\Framework\\Filesystem"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Contains classes that handle reading from and writing to the file system.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Magento\\Framework\\HTTP\\PhpEnvironment"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Magento\\Framework\\Session"),(0,r.kt)("td",{parentName:"tr",align:"left"})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Magento\\Framework\\Stdlib\\Cookie"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Code to handle the HTTP request/responses as well as session/cookies is found here.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Magento\\Framework\\Exception"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Contains the basic exceptions that are thrown throughout the Commerce codebase.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Magento\\Framework\\Event"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Contains the code that publishes synchronous events and that handles observers for any Commerce event is handled here.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Magento\\Framework\\Validator"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Contains the code that validates data (currencies, not empty) and that handles observers for any Commerce event.")))),(0,r.kt)("h2",{id:"acl"},"ACL"),(0,r.kt)("p",null,"Access control list",(0,r.kt)("br",{parentName:"p"}),"\n","Access Control List (ACL) rules allow an admin to limit the permissions of users.",(0,r.kt)("br",{parentName:"p"}),"\n","Magento ACL use Zend/Acl  "),(0,r.kt)("h3",{id:"load-user--check-acl-allow"},"Load User & check ACL allow"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Magento\\Framework\\AuthorizationInterface::isAllowed()\n$this->authorization->isAllowed('Magento_InventoryApi::stock_edit');\n\\\\ Admin\n\n\\\\ Customer\n\n\\\\ API\n")),(0,r.kt)("h3",{id:"new-acl"},"New ACL"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'\\\\ etc/acl.xml\n<?xml version="1.0"?>\n<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:Acl/etc/acl.xsd">\n   <acl>\n     <resources>\n        <resource id="Magento_Backend::admin">\n           <resource id="Vendor_MyModule::menu" title="Custom Menu" sortOrder="10" >\n              <resource id="Vendor_MyModule::create" title="Create" sortOrder="50" />\n              <resource id="Vendor_MyModule::delete" title="Delete" sortOrder="100" />\n              <resource id="Vendor_MyModule::view" title="View" sortOrder="150">\n                 <resource id="Vendor_MyModule::view_additional" title="View Additional Information" sortOrder="10" />\n              </resource>\n           </resource>\n        </resource>\n     </resources>\n   </acl>\n</config>\n\n\\\\ Clean Cache\nbin/magento cache:clean\n\n')),(0,r.kt)("h3",{id:"restrict-admin-controllers"},"Restrict admin controllers"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\\\\ use on Controller/Adminhtml/Create/Index.php\nconst ADMIN_RESOURCE = 'Vendor_MyModule::create'\nconst ADMIN_RESOURCE = 'Vendor_MyModule::delete';\n")),(0,r.kt)("h3",{id:"content-restrictions-for-admin-users"},"Content restrictions for admin users"),(0,r.kt)("p",null,"\\"," use on block xml"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'\\\\ aclResource\n<block class="Vendor\\MyModule\\Block\\Adminhtml\\Type" name="block.example" aclResource="Vendor_MyModule::view_additional">\n    \x3c!-- ... --\x3e\n</block>\n')),(0,r.kt)("h3",{id:"restrict-web-api-access"},"Restrict web API access"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'\\\\ resource\n<?xml version = "1.0"?>\n<routes xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n        xsi:noNamespaceSchemaLocation="urn:magento:module:Magento_Webapi:etc/webapi.xsd">\n    <route url="/V1/admin/create" method="POST">\n        <service class="Vendor\\MyModule\\Api\\Create" method="execute"/>\n        <resources>\n            <resource ref="Vendor_MyModule::create" />\n        </resources>\n    </route>\n</routes>\n')),(0,r.kt)("h3",{id:"restrict-web-api-menu"},"Restrict web API menu"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'<?xml version="1.0"?>\n<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:module:Magento_Backend:etc/menu.xsd">\n    <menu>\n     <add id="Vendor_MyModule::menu" title="Custom Menu" module="Vendor_MyModule" sortOrder="10" resource="Vendor_MyModule::menu"/>\n     <add id="Vendor_MyModule::create" title="Create" module="Vendor_MyModule" sortOrder="10" parent="Vendor_MyModule::menu" action="custommenu/create/index" resource="Vendor_MyModule::create"/>\n     <add id="Vendor_MyModule::delete" title="Delete" module="Vendor_MyModule" sortOrder="20" parent="Vendor_MyModule::menu" action="custommenu/delete/index" resource="Vendor_MyModule::delete"/>\n     <add id="Vendor_MyModule::view" title="View" module="Vendor_MyModule" sortOrder="30" parent="Vendor_MyModule::menu" action="custommenu/view/index" resource="Vendor_MyModule::view"/>\n    </menu>\n</config>\n')),(0,r.kt)("h2",{id:"api"},"API"),(0,r.kt)("h3",{id:"searchcriteria"},"SearchCriteria"),(0,r.kt)("h3",{id:"search"},"Search"),(0,r.kt)("h2",{id:"authorization"},"Authorization"),(0,r.kt)("h2",{id:"autoload"},"Autoload"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Autoload")," library contains an abstract wrapper for Composer's generated autoloader."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"AutoloaderInterface provides abstract ability use and modify the autoloader class."),(0,r.kt)("li",{parentName:"ul"},"AutoloaderRegistry allows the same instance of the autoloader to put accessed across the code base."),(0,r.kt)("li",{parentName:"ul"},"ClassLoaderWrapper wraps around Composer's generated autoloader in order to insulate it."),(0,r.kt)("li",{parentName:"ul"},"Populator fills in PSR-0 and PSR-4 standard namespace-directory mappings for the autoloader.")),(0,r.kt)("h2",{id:"archive"},"Archive"),(0,r.kt)("p",null,"Archive library provides functionalities for archiving files including following formats:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"tar"),(0,r.kt)("li",{parentName:"ul"},"gz"),(0,r.kt)("li",{parentName:"ul"},"bzip2")),(0,r.kt)("h2",{id:"async"},"Async"),(0,r.kt)("p",null,"Async library provides classes to work with asynchronous/deferred operations, for instance sending an HTTP request."),(0,r.kt)("h2",{id:"config"},"Config"),(0,r.kt)("h3",{id:"config-xml"},"Config xml"),(0,r.kt)("h3",{id:"config-schema"},"Config schema"),(0,r.kt)("h3",{id:"sensitive-config"},"Sensitive config"),(0,r.kt)("p",null,"Sensitive and system-specific"),(0,r.kt)("h3",{id:"environment-variables"},"Environment variables"),(0,r.kt)("h3",{id:"config-on-production"},"Config on production"),(0,r.kt)("h3",{id:"how-to-create-configuration-types"},'How to "Create configuration types"'),(0,r.kt)("p",null,"To create a configuration type, you must add at minimum:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A loader"),(0,r.kt)("li",{parentName:"ul"},"XSD validation schema"),(0,r.kt)("li",{parentName:"ul"},"XML configuration files")),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://experienceleague.adobe.com/docs/commerce-operations/configuration-guide/files/config-create-types.html"},"Refrence magento docs")),(0,r.kt)("p",null,"Reader"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\\\\ \\Magento\\Framework\\Config\\Reader\\Filesystem\n")),(0,r.kt)("p",null,"Convert"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\\\\ \\Magento\\Framework\\Config\\ConverterInterface\n\n")),(0,r.kt)("p",null,"Schema"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\\Magento\\Framework\\Config\\SchemaLocatorInterface\n\n")),(0,r.kt)("h2",{id:"console"},"Console"),(0,r.kt)("p",null,"This component contains Magento Cli and can be extended via DI configuration."),(0,r.kt)("p",null,"For example we can introduce new command in module using di.xml:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'<type name="Magento\\Framework\\Console\\CommandListInterface">\n    <arguments>\n        <argument name="commands" xsi:type="array">\n            <item name="test_me" xsi:type="object">Magento\\MyModule\\Console\\TestMeCommand</item>\n        </argument>\n    </arguments>\n</type>\n')),(0,r.kt)("h2",{id:"controller"},"Controller"),(0,r.kt)("h3",{id:"admin--frontend"},"Admin & Frontend"),(0,r.kt)("h3",{id:"get-post-push-delete"},"GET, POST, PUSH, DELETE"),(0,r.kt)("h3",{id:"response-data-type"},"Response data type"),(0,r.kt)("p",null,"Allowed result types"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"json"),(0,r.kt)("li",{parentName:"ul"},"raw"),(0,r.kt)("li",{parentName:"ul"},"redirect"),(0,r.kt)("li",{parentName:"ul"},"forward"),(0,r.kt)("li",{parentName:"ul"},"layout"),(0,r.kt)("li",{parentName:"ul"},"page")),(0,r.kt)("p",null,"Frontend controller"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"use Magento\\Framework\\App\\Action\\Action;\nuse Magento\\Framework\\App\\Action\\Context;\n\nclass NewController extends Action implements HttpGetActionInterface, HttpPostActionInterface\n\npublic function execute()\n{\n    $resultPage = $this->pageHelper->prepareResultPage($this, $this->getPageId());\n    if (!$resultPage) {\n        $resultForward = $this->resultForwardFactory->create();\n        return $resultForward->forward('noroute');\n    }\n    return $resultPage;\n}\n")),(0,r.kt)("p",null,"Backend Controller"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"")),(0,r.kt)("h2",{id:"convert"},"Convert"),(0,r.kt)("h2",{id:"cron"},"Cron"),(0,r.kt)("h2",{id:"entitymanager"},"EntityManager"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"EntityManager")," library contains functionality for entity persistence layer.\nEntityManager supports persistence of basic entity attributes as well as extension and custom attributes\nadded by 3rd party developers for the purpose of extending default entity behavior."),(0,r.kt)("p",null,"It's not recommended to use EntityManager and its infrastructure for entity persistence."),(0,r.kt)("p",null,"Currently, it's recommended to use Resource Model infrastructure and make a successor of\nMagento\\Framework\\Model\\ResourceModel\\Db\\AbstractDb class or successor of\nMagento\\Eav\\Model\\Entity\\AbstractEntity if EAV attributes support needed."),(0,r.kt)("p",null,"For filtering operations, it's recommended to use successor of\nMagento\\Framework\\Model\\ResourceModel\\Db\\Collection\\AbstractCollection class."),(0,r.kt)("h2",{id:"encryption"},"Encryption"),(0,r.kt)("p",null,"The Encryption library provides functionalities such as hashing passwords, encrypting/decrypting data, URLs encoding, using cryptographic algorithms."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Ecryption password\nMagento\\Framework\\Encryption\\Encryptor::getHash()\n\n\n// Url encode/decode use Magento\\Framework\\Url \n// Magento\\Framework\\Url\\Encode\n// Magento\\Framework\\Url\\Decode\n")),(0,r.kt)("h2",{id:"exception"},"Exception"),(0,r.kt)("p",null,"List Exceptions."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"AbstractAggregateException\nAlreadyExistsException\nAuthenticationException : The consumer isn't authorized to access resources\nBulkException : Exception thrown while processing bulk of entities\nConfigurationMismatchException : Configuration mismatch detected.\nCouldNotDeleteException \nCouldNotSaveException\nCronException\nEmailNotConfirmedException\nFileSystemException\nInputException: 'input invalid';\nIntegrationException\nInvalidArgumentException\nInvalidEmailOrPasswordException\nLocalizedException\nMailException\nNoSuchEntityException: No such entity is an exception when finding an entity.\nNotFoundException\nPaymentException\nRemoteServiceUnavailableException\nRuntimeException\nSecurityViolationException\nSerializationException\nSessionException\nStateException\nValidatorExceptio\n")),(0,r.kt)("h2",{id:"event"},"Event"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Event")," library provides supports for Magento events."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"// Event manager\n// Used to dispatch global events\n// Magento\\Framework\\Event\\Manager\n\n/**\n * Dispatch event\n *\n * Calls all observer callbacks registered for this event\n * and multiple observers matching event name pattern\n *\n * @param string $eventName\n * @param array $data\n * @return void\n */\npublic function dispatch($eventName, array $data = [])\n{\n    $eventName = mb_strtolower($eventName);\n    \\Magento\\Framework\\Profiler::start('EVENT:' . $eventName, ['group' => 'EVENT', 'name' => $eventName]);\n    foreach ($this->_eventConfig->getObservers($eventName) as $observerConfig) {\n        $event = new \\Magento\\Framework\\Event($data);\n        $event->setName($eventName);\n\n        $wrapper = new Observer();\n        $wrapper->setData(array_merge(['event' => $event], $data));\n\n        \\Magento\\Framework\\Profiler::start('OBSERVER:' . $observerConfig['name']);\n        $this->_invoker->dispatch($observerConfig, $wrapper);\n        \\Magento\\Framework\\Profiler::stop('OBSERVER:' . $observerConfig['name']);\n    }\n    \\Magento\\Framework\\Profiler::stop('EVENT:' . $eventName);\n}\n\n// Dispatches an event to observer's callback\n// Magento\\Framework\\Event\\Observer\n\n/**\n* Dispatches an event to observer's callback\n*\n* @param Event $event\n* @return $this\n*/\npublic function dispatch(Event $event)\n{\n    if (!$this->isValidFor($event)) {\n        return $this;\n    }\n\n    $callback = $this->getCallback();\n    $this->setEvent($event);\n\n    $_profilerKey = 'OBSERVER: ';\n    if (is_object($callback[0])) {\n        $_profilerKey .= get_class($callback[0]);\n    } else {\n        $_profilerKey .= (string)$callback[0];\n    }\n    $_profilerKey .= ' -> ' . $callback[1];\n\n    \\Magento\\Framework\\Profiler::start($_profilerKey);\n    call_user_func($callback, $this);\n    \\Magento\\Framework\\Profiler::stop($_profilerKey);\n\n    return $this;\n}\n\n")),(0,r.kt)("h2",{id:"filter-template"},"Filter Template"),(0,r.kt)("h2",{id:"http"},"HTTP"),(0,r.kt)("h2",{id:"message"},"Message"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Message")," library is responsible for message creation and management."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\n/**\n * @var MessageManagerInterface\n */\nprotected $messageManager;\n// $context Magento\\Framework\\App\\Action\\Context\n$this->messageManager = $context->getMessageManager();\n\n$this->messageManager->addSuccessMessage(__('msg'));\n$this->messageManager->addWarningMessage(__('msg'));\n")),(0,r.kt)("h2",{id:"objectmanager"},"ObjectManager"),(0,r.kt)("h2",{id:"phrase"},"Phrase"),(0,r.kt)("p",null,"Class ",(0,r.kt)("em",{parentName:"p"},"\\Magento\\Framework\\Phrase")," calls renderer to make the translation of the text."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"__('text')\n")),(0,r.kt)("h2",{id:"logger"},"Logger"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Logger")," provides a standard mechanism to log to system and error logs.(",(0,r.kt)("strong",{parentName:"p"},"Molologger"),")"),(0,r.kt)("h2",{id:"search-1"},"Search"),(0,r.kt)("h2",{id:"shell"},"Shell"),(0,r.kt)("p",null,"A library with object-oriented interface for generation of shell commands"),(0,r.kt)("h2",{id:"view---ui"},"View - UI"),(0,r.kt)("h2",{id:"multiple-stores"},"Multiple Stores"),(0,r.kt)("h3",{id:"currentcy"},"Currentcy"),(0,r.kt)("h3",{id:"locale"},"Locale"),(0,r.kt)("h2",{id:"files"},"Files"),(0,r.kt)("p",null,"Magento/FileSystem:"),(0,r.kt)("p",null,"The library includes File, HTTP, HTTPS and Zlib drivers."),(0,r.kt)("h3",{id:"filesystem-driver"},"FileSystem Driver"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"File\n\nHTTP\n\nHTTPS\n\nZlib\n")),(0,r.kt)("h3",{id:"directory"},"Directory"),(0,r.kt)("p",null,"\\Magento\\Framework\\Filesystem\\DirectoryList",(0,r.kt)("br",{parentName:"p"}),"\n","class defines list of directories available in the application."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\\\\ \\Magento\\Framework\\App\\Filesystem\\DirectoryList\n$result = [\n    self::ROOT => [parent::PATH => ''],\n    self::APP => [parent::PATH => 'app'],\n    self::CONFIG => [parent::PATH => 'app/etc'],\n    self::LIB_INTERNAL => [parent::PATH => 'lib/internal'],\n    self::VAR_DIR => [parent::PATH => 'var'],\n    /** @deprecated  */\n    self::VAR_EXPORT => [parent::PATH => 'var/export'],\n    self::CACHE => [parent::PATH => 'var/cache'],\n    self::LOG => [parent::PATH => 'var/log'],\n    self::DI => [parent::PATH => 'generated/metadata'],\n    self::GENERATION => [parent::PATH => Io::DEFAULT_DIRECTORY],\n    self::SESSION => [parent::PATH => 'var/session'],\n    self::MEDIA => [parent::PATH => 'pub/media', parent::URL_PATH => 'media'],\n    self::STATIC_VIEW => [parent::PATH => 'pub/static', parent::URL_PATH => 'static'],\n    self::PUB => [parent::PATH => 'pub', parent::URL_PATH => ''],\n    self::LIB_WEB => [parent::PATH => 'lib/web'],\n    self::TMP => [parent::PATH => 'var/tmp'],\n    self::UPLOAD => [parent::PATH => 'pub/media/upload', parent::URL_PATH => 'media/upload'],\n    self::TMP_MATERIALIZATION_DIR => [parent::PATH => 'var/view_preprocessed/pub/static'],\n    self::TEMPLATE_MINIFICATION_DIR => [parent::PATH => 'var/view_preprocessed'],\n    self::SETUP => [parent::PATH => 'setup/src'],\n    self::COMPOSER_HOME => [parent::PATH => 'var/composer_home'],\n    self::GENERATED => [parent::PATH => 'generated'],\n    self::GENERATED_CODE => [parent::PATH => Io::DEFAULT_DIRECTORY],\n    self::GENERATED_METADATA => [parent::PATH => 'generated/metadata'],\n    self::VAR_IMPORT_EXPORT => [parent::PATH => 'var', parent::URL_PATH => 'import_export'],\n];\n")),(0,r.kt)("p",null,"Get directory"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\\\\ Magento\\Framework\\Filesystem::getDirectoryRead()\n\\\\ ==> Magento\\Framework\\Filesystem\\Directory\\Read implement \ngetAbsolutePath\ngetRelativePath\nread\nsearch\nisExist\nstat\nisReadable\nisFile\nisDirectory\nopenFile\nreadFile\n\n\\\\ Magento\\Framework\\Filesystem::getDirectoryWrite()\n\\\\ ==> Magento\\Framework\\Filesystem\\Directory\\Write\ncreate\ndelete\nrenameFile\ncopyFile\ncreateSymlink\nchangePermissions\nchangePermissionsRecursively\nopenFile\nwriteFile\n\n// Get get absolute path\n$directory->getAbsolutePath()\n// Get relative path\n$directory->getRelativePath()\n\n// Magento\\Framework\\App\\Filesystem\\DirectoryResolver::validatePath()\n// Magento directories resolver.\n$path = $this->getStorage()->getSession()->getCurrentPath();\nif (!$this->directoryResolver->validatePath($path, DirectoryList::MEDIA)) {\n    throw new \\Magento\\Framework\\Exception\\LocalizedException(\n        __('Directory %1 is not under storage root path.', $path)\n    );\n}\n\n")),(0,r.kt)("h3",{id:"glob"},"Glob"),(0,r.kt)("p",null,"Laminas\\Stdlib\\Glob"),(0,r.kt)("h3",{id:"file"},"File"),(0,r.kt)("p",null,"Read & Write file "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\\\\ Magento\\Framework\\Filesystem\\File\\Read  \n\\\\ Magento\\Framework\\Filesystem\\File\\Write  \n")),(0,r.kt)("h3",{id:"file-io"},"File IO"),(0,r.kt)("p",null,"Steam files with FILE, FTP, SFTP"),(0,r.kt)("h3",{id:"file-upload"},"File upload"),(0,r.kt)("h3",{id:"csv"},"Csv"),(0,r.kt)("h2",{id:"serializer"},"Serializer"),(0,r.kt)("p",null,"Serialize library provides interface SerializerInterface"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"Json")," - default implementation. Uses PHP native json_encode/json_decode functions;"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"JsonHexTag")," - default implementation. Uses PHP native json_encode/json_decode functions with ",(0,r.kt)("inlineCode",{parentName:"li"},"JSON_HEX_TAG")," option enabled;"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"Serialize")," - less secure than ",(0,r.kt)("em",{parentName:"li"},"Json"),", but gives higher performance on big arrays. Uses PHP native serialize/unserialize functions, does not unserialize objects on PHP 7.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"\\\\ __construct(\\Magento\\Framework\\Serialize\\SerializerInterface $serializerInterface)\n$this->serializer = $serializerInterface ?: \\Magento\\Framework\\App\\ObjectManager::getInstance()\n            ->get(\\Magento\\Framework\\Serialize\\Serializer\\JsonHexTag::class);\n...\n$this->serializer->serialize($arrays);\n$this->serializer->unserialize($string)\n\n")),(0,r.kt)("h2",{id:"session"},"Session"),(0,r.kt)("h3",{id:"standard-session-management"},"Standard session management"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Magento\\Framework\\Session\\SessionManager\n\n")),(0,r.kt)("h3",{id:"session-handler"},"Session handler"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"File"),(0,r.kt)("li",{parentName:"ul"},"Db"),(0,r.kt)("li",{parentName:"ul"},"Redis")),(0,r.kt)("h3",{id:"security"},"Security"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Session ID"),(0,r.kt)("li",{parentName:"ul"},"Validator")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Validate REMOTE_ADDR\nValidate HTTP_VIA\nValidate HTTP_X_FORWARDED_FOR\nValidate HTTP_USER_AGENT\n\nValidator with domain, lifetime, path, samesite\n\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Session Size Config")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Max session size admin & frontend\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Session Lifetime")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Admin Session Lifetime\n\n")),(0,r.kt)("h3",{id:"logger--debug-session"},"Logger & Debug session"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Cookies => Session\n")),(0,r.kt)("h2",{id:"url"},"URL"),(0,r.kt)("p",null,"URL encode, decode, validator"),(0,r.kt)("h2",{id:"escaper"},"Escaper"),(0,r.kt)("h2",{id:"debug--profiler"},"Debug & Profiler"))}p.isMDXComponent=!0}}]);