"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9820],{26723:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>s,metadata:()=>c,toc:()=>a});var r=n(74848),o=n(28453);const s={sidebar_position:6},i="Routing",c={id:"mage2/routing",title:"Routing",description:"FrontController classes",source:"@site/docs/mage2/routing.md",sourceDirName:"mage2",slug:"/mage2/routing",permalink:"/docs/mage2/routing",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"Request Flow Processing",permalink:"/docs/mage2/request-flow-processing"},next:{title:"Magento UI",permalink:"/docs/mage2/magento-ui"}},l={},a=[{value:"FrontController classes",id:"FrontController-classes",level:2},{value:"Standard router",id:"Standard-router",level:3},{value:"Custom routers",id:"Custom-routers",level:3},{value:"routes.xml",id:"routesxml",level:3},{value:"Action class",id:"Action-class",level:3}];function d(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{id:"Routing",children:"Routing"}),"\n",(0,r.jsx)(t.h2,{id:"FrontController-classes",children:"FrontController classes"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"FrontController: Magento\\Framework\\App\\FrontController"}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"The FrontController class class searches through a list of routers, provided by the RouterList class, until it matches one that can process a request. When the FrontController finds a matching router, it dispatches the request to an action class returned by the router."}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"RouterList: Magento\\Framework\\App\\RouterList"}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"The RouterList class collection of routers"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Router class:"}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"The Router class matches a request to an action class that processes the request.\nImplement Magento\\Framework\\App\\RouterInterface"}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"frontend"})," area routers:"]}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Router"}),(0,r.jsx)(t.th,{children:"Order"}),(0,r.jsx)(t.th,{children:"Class"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"robots"}),(0,r.jsx)(t.td,{children:"10"}),(0,r.jsx)(t.td,{children:"Magento\\Robots\\Controller\\Route"}),(0,r.jsx)(t.td,{children:"Matches request to the robots.txt file"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"urlrewrite"}),(0,r.jsx)(t.td,{children:"20"}),(0,r.jsx)(t.td,{children:"Magento\\UrlRewrite\\Controller\\Route"}),(0,r.jsx)(t.td,{children:"Matches requests with URL defined in the database"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"standard"}),(0,r.jsx)(t.td,{children:"30"}),(0,r.jsx)(t.td,{children:"Magento\\Framework\\App\\Router\\Base"}),(0,r.jsx)(t.td,{children:"The standard router"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"cms"}),(0,r.jsx)(t.td,{children:"60"}),(0,r.jsx)(t.td,{children:"Magento\\Cms\\Controller\\Route"}),(0,r.jsx)(t.td,{children:"Matches requests for CMS pages"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"default"}),(0,r.jsx)(t.td,{children:"100"}),(0,r.jsx)(t.td,{children:"Magento\\Framework\\App\\Router\\DefaultRoute"}),(0,r.jsx)(t.td,{children:"The default router : set to no-route action"})]})]})]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"admin"})," area routers:"]}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Router"}),(0,r.jsx)(t.th,{children:"Order"}),(0,r.jsx)(t.th,{children:"Class"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"admin"}),(0,r.jsx)(t.td,{children:"10"}),(0,r.jsx)(t.td,{children:"Magento\\Backend\\App\\Route"}),(0,r.jsx)(t.td,{children:"Matches requests in the Admin area"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"default"}),(0,r.jsx)(t.td,{children:"100"}),(0,r.jsx)(t.td,{children:"Magento\\Framework\\App\\Router\\DefaultRouter"}),(0,r.jsx)(t.td,{children:"The default router for the Admin area"})]})]})]}),"\n",(0,r.jsx)(t.h3,{id:"Standard-router",children:"Standard router"}),"\n",(0,r.jsx)(t.p,{children:"A URL that uses the standard router has the following format:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"<store-url>/<store-code>/<front-name>/<controller-name>/<action-name>\nWhere:\n\n* <store-url> - specifies the base URL for the application instance\n* <store-code> - specifies the store context\n* <front-name> - specifies the frontName of the FrontController to use (for example, [routesxml])\n* <controller-name> - specifies the name of the controller\n* <action-name> - specifies the action class to execute on the controller class\n"})}),"\n",(0,r.jsx)(t.h3,{id:"Custom-routers",children:"Custom routers"}),"\n",(0,r.jsxs)(t.p,{children:["Create an implementation of ",(0,r.jsx)(t.code,{children:"RouterInterface"})," to create a custom router, and define the match() function in this class to use your own route matching logic."]}),"\n",(0,r.jsx)(t.p,{children:"If you need route configuration data, use the Route Config class."}),"\n",(0,r.jsxs)(t.p,{children:["To add your custom router to the list of routers for the ",(0,r.jsx)(t.code,{children:"FrontController"}),", add the following entry in your module's ",(0,r.jsx)(t.code,{children:"frontend/di.xml"})," file:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-frontend/di.xml",children:'<type name="Magento\\Framework\\App\\RouterList">\n    <arguments>\n        <argument name="routerList" xsi:type="array">\n            <item name="%name%" xsi:type="array">\n                <item name="class" xsi:type="string">%classpath%</item>\n                <item name="disable" xsi:type="boolean">false</item>\n                <item name="sortOrder" xsi:type="string">%sortorder%</item>\n            </item>\n        </argument>\n    </arguments>\n</type>\n\n* %name% - The unique name of your router in Magento.\n* %classpath% - The path to your router class. Example: Magento\\Robots\\Controller\\Router\n* %sortorder% - The sort order of this entry in the router list.\n'})}),"\n",(0,r.jsx)(t.h3,{id:"routesxml",children:"routes.xml"}),"\n",(0,r.jsx)(t.p,{children:"The routes.xml file maps which module to use for a URL with a specific frontName and area. The location of the routes.xml file in a module, either etc/frontend or etc/adminhtml, specifies where those routes are active."}),"\n",(0,r.jsx)(t.p,{children:"The content of this file uses the following format:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:'routes.xml\n<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:App/etc/routes.xsd">\n    <router id="%routerId%">\n        <route id="%routeId%" frontName="%frontName%">\n            <module name="%moduleName%"/>\n        </route>\n    </router>\n</config>\n\n* %routerId - specifies the name of the router in Magento. See the reference tables in the Router class section.\n* %routeId% - specifies the unique node id for this route in Magento, is also the first segment of its associated layout handle XML filename (routeId_controller_action.xml).\n* %frontName% - specifies the first segment after the base URL of a request.\n* %moduleName% - specifies the name of your module.\n\n\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"Action-class",children:"Action class"}),"\n",(0,r.jsxs)(t.p,{children:["Action classes are implementations of the ",(0,r.jsx)(t.code,{children:"ActionInterface"})," that a router returns on matched requests. The ",(0,r.jsx)(t.code,{children:"execute()"})," function in these classes contain the logic for dispatching requests."]}),"\n",(0,r.jsxs)(t.p,{children:["Each Action should implement one or more ",(0,r.jsx)(t.code,{children:"Magento\\Framework\\App\\Action\\Http"})," HTTP ",(0,r.jsx)(t.code,{children:"MethodActionInterface"})," to declare which HTTP request methods it can process. The most common ones are:"]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.code,{children:"\\Magento\\Framework\\App\\Action\\HttpDeleteActionInterface"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.code,{children:"\\Magento\\Framework\\App\\Action\\HttpGetActionInterface"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.code,{children:"\\Magento\\Framework\\App\\Action\\HttpPostActionInterface"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.code,{children:"\\Magento\\Framework\\App\\Action\\HttpPutActionInterface"})}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["The application has a form key validation in place for all ",(0,r.jsx)(t.code,{children:"POST"})," non-AJAX requests - if your Action doesn't need that validation or you want to modify it you can implement ",(0,r.jsx)(t.code,{children:"CsrfAwareActionInterface"}),"."]})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>c});var r=n(96540);const o={},s=r.createContext(o);function i(e){const t=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(s.Provider,{value:t},e.children)}}}]);