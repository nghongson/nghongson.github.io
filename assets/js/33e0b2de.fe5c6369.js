"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7719],{3607:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>a});var d=o(4848),r=o(8453);const t={},i="Extensibility and modularity",s={id:"mage2/modularity",title:"Extensibility and modularity",description:"Module overview",source:"@site/docs/mage2/modularity.md",sourceDirName:"mage2",slug:"/mage2/modularity",permalink:"/docs/mage2/modularity",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"messages-queue",permalink:"/docs/mage2/messages-queue"},next:{title:"php-autoload",permalink:"/docs/mage2/php/php-autoload"}},l={},a=[{value:"Module overview",id:"Module-overview",level:2},{value:"Module components",id:"Module-components",level:3},{value:"Module locations",id:"Module-locations",level:3},{value:"Modules and areas",id:"Modules-and-areas",level:2},{value:"Area types",id:"Area-types",level:3},{value:"Note about request processing",id:"Note-about-request-processing",level:3},{value:"Module relationships",id:"Module-relationships",level:2},{value:"Module dependencies",id:"Module-dependencies",level:2},{value:"Dependency types",id:"Dependency-types",level:3},{value:"Hard dependencies",id:"Hard-dependencies",level:4},{value:"Soft dependencies",id:"Soft-dependencies",level:4},{value:"Managing module dependencies",id:"Managing-module-dependencies",level:4}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.h1,{id:"Extensibility-and-modularity",children:"Extensibility and modularity"}),"\n",(0,d.jsx)(n.h2,{id:"Module-overview",children:"Module overview"}),"\n",(0,d.jsx)(n.h3,{id:"Module-components",children:"Module components"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Themes"}),"\n",(0,d.jsx)(n.li,{children:"Libraries"}),"\n",(0,d.jsx)(n.li,{children:"Language packs"}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"Module-locations",children:"Module locations"}),"\n",(0,d.jsx)(n.p,{children:"A module must include a registration.php file in its root folder."}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"ENTITY"}),(0,d.jsx)(n.th,{children:"LOCATION"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Code base of your custom module"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"/app/code/<Vendor>/<Module>"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Custom theme files (storefront)"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"/app/design/frontend/<Vendor>/<theme>"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"Custom theme files (modules)"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"<Module>/<theme>"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"If you want to use a library"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"/lib/<Vendor_Library>"})})]})]})]}),"\n",(0,d.jsx)(n.h2,{id:"Modules-and-areas",children:"Modules and areas"}),"\n",(0,d.jsx)(n.h3,{id:"Area-types",children:"Area types"}),"\n",(0,d.jsx)(n.p,{children:"Area |\n-------|---------\nAdmin (adminhtml)| entry point for this area is pub/index.php. The Admin panel area includes the code needed for store management. The /app/design/adminhtml directory contains all the code for components you'll see while working in the Admin.\nStorefront (frontend)| entry point for this area is pub/index.php. The storefront (or frontend) contains template and layout files that define the appearance of your storefront.\nBasic (base)| used as a fallback for files absent in adminhtml and frontend areas.\nCron (crontab)| In pub/cron.php, the \\Magento\\Framework\\App\\Cron class always loads the 'crontab' area\nWeb API REST (webapi_rest)| entry point for this area is pub/index.php. The REST area has a front controller that understands how to do URL lookups for REST-based URLs.\nGraphQL (graphql)| entry point for this area is pub/index.php\nWeb API SOAP (webapi_soap)| entry point for this area is pub/index.php."}),"\n",(0,d.jsx)(n.h3,{id:"Note-about-request-processing",children:"Note about request processing"}),"\n",(0,d.jsx)(n.p,{children:"The Commerce framework processes a URL request by first stripping off the base URL. The first path segment of the remaining URL identifies the request area."}),"\n",(0,d.jsx)(n.p,{children:"After the area name, the URI segment specifies the frontname. When an HTTP request arrives, the Commerce framework extracts the handle from the URL and interprets it as follows:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"[frontName]/[controller folder]/[controller class]\n"})}),"\n",(0,d.jsx)(n.p,{children:"The frontName is a value defined in the module. Using catalog/product/view as an example:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"catalog is the frontName in the module area's routes.xml file"}),"\n",(0,d.jsx)(n.li,{children:"product is in the controller folder"}),"\n",(0,d.jsx)(n.li,{children:"view is the controller class"}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"catalog/product_compare/add = Magento/Catalog/Controller/Product/Compare/Add.php\n"})}),"\n",(0,d.jsx)(n.h2,{id:"Module-relationships",children:"Module relationships"}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"https://developer.adobe.com/commerce/php/architecture/modules/relationships/",children:"Docs Module relationships"})}),"\n",(0,d.jsx)(n.h2,{id:"Module-dependencies",children:"Module dependencies"}),"\n",(0,d.jsx)(n.p,{children:"A software dependency identifies one software component's reliance on another for proper functioning. A core principle of the Adobe Commerce and Magento Open Source framework (Commerce framework) architecture is the minimization of software dependencies. Instead of being closely interrelated with other modules, modules are optimally designed to be loosely coupled. Loosely coupled modules require little or no knowledge of other modules to perform their tasks."}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.a,{href:"https://developer.adobe.com/commerce/php/architecture/modules/dependencies/",children:"Magento docs"})}),"\n",(0,d.jsx)(n.h3,{id:"Dependency-types",children:"Dependency types"}),"\n",(0,d.jsx)(n.h4,{id:"Hard-dependencies",children:"Hard dependencies"}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"require"})," section of ",(0,d.jsx)(n.code,{children:"app/code/<Vendor>/<Module>/composer.json"})," file contains hard dependency definitions for the module"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'  "require": {\n    "magento/module-catalog": "103.0.*",\n    "magento/module-email": "101.0.*",\n    "magento/module-media-storage": "100.3.*",\n    "magento/module-store": "101.0.*",\n    "magento/module-theme": "101.0.*",\n    "magento/module-ui": "101.1.*",\n    "magento/module-variable": "100.3.*",\n    "magento/module-widget": "101.1.*",\n    "magento/module-authorization": "100.3.*"\n   }\n'})}),"\n",(0,d.jsx)(n.h4,{id:"Soft-dependencies",children:"Soft dependencies"}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"suggest"})," section of ",(0,d.jsx)(n.code,{children:"app/code/<Vendor>/<Module>/composer.json"})," file contains soft dependency definitions for the module"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'  "suggest": {\n    "magento/module-graph-ql": "*",\n    "magento/module-graph-ql-cache": "*",\n    "magento/module-store-graph-ql": "*"\n  }\n'})}),"\n",(0,d.jsxs)(n.p,{children:["The ",(0,d.jsx)(n.code,{children:"<sequence>"})," node of ",(0,d.jsx)(n.code,{children:"app/code/<Vendor>/<Module>/etc/module.xml"})," file also contains soft dependency definitions for the module."]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'  <module name="Magento_Cms">\n    <sequence>\n      <module name="Magento_Store"/>\n      <module name="Magento_Theme"/>\n      <module name="Magento_Variable"/>\n    </sequence>\n  </module>\n'})}),"\n",(0,d.jsx)(n.h4,{id:"Managing-module-dependencies",children:"Managing module dependencies"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Name and declare the module in the module.xml file."}),"\n",(0,d.jsx)(n.li,{children:"Declare any dependencies that the module has (whether on other modules or on a different component) in the module's composer.json file."}),"\n",(0,d.jsx)(n.li,{children:"(Optional) Define the desired load order of config files and .css files in the module.xml file."}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:'// etc/module.xml\n<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:Module/etc/module.xsd">\n    <module name="Module_A" setup_version="1.0.0">\n        <sequence>\n            <module name="Module_B" />\n        </sequence>\n    </module>\n</config>\n\n// app/etc/config.php\nreturn [\n    \'modules\' => [\n        ...\n        \'Module_B\' => 1,\n        \'Module_A\' => 1,\n        ...\n    ]\n];\n'})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(c,{...e})}):c(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>i,x:()=>s});var d=o(6540);const r={},t=d.createContext(r);function i(e){const n=d.useContext(t);return d.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),d.createElement(t.Provider,{value:n},e.children)}}}]);