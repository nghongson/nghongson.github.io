"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1256],{7949:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>d,metadata:()=>i,toc:()=>o});var t=n(4848),a=n(8453);const d={},s="Middleware",i={id:"nextjs/middleware",title:"Middleware",description:"Example middleware.ts",source:"@site/docs/nextjs/middleware.md",sourceDirName:"nextjs",slug:"/nextjs/middleware",permalink:"/docs/nextjs/middleware",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"cache",permalink:"/docs/nextjs/cache"},next:{title:"ref",permalink:"/docs/nextjs/ref"}},l={},o=[{value:"Example middleware.ts",id:"Example-middlewarets",level:3},{value:"wrapper-middleware.ts",id:"wrapper-middlewarets",level:3}];function c(e){const r={code:"code",h1:"h1",h3:"h3",pre:"pre",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.h1,{id:"Middleware",children:"Middleware"}),"\n",(0,t.jsx)(r.h3,{id:"Example-middlewarets",children:"Example middleware.ts"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:'import { NextResponse } from "next/server";\nimport type { NextRequest } from "next/server";\n\n// This function can be marked `async` if using `await` inside\nexport function middleware(request: NextRequest) {\n  return NextResponse.redirect(new URL("/home", request.url));\n}\n\n// See "Matching Paths" below to learn more\nexport const config = {\n  matcher: "/about/:path*",\n};\n'})}),"\n",(0,t.jsx)(r.h3,{id:"wrapper-middlewarets",children:"wrapper-middleware.ts"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-typescript",children:'import { NextMiddleware } from "next/server";\n\nexport type WrapMiddlewareParams = {\n  middleware?: NextMiddleware;\n};\n\nexport interface WrapMiddleware {\n  (params: AuthMiddlewareParams): NextMiddleware;\n}\n\nconst createWrapperMiddleware: WrapMiddleware = (\n  params: WrapMiddlewareParams,\n) => {\n  const { middleware } = params;\n  return async function middlewareWrapper(\n    ...args\n  ): Promise<NextMiddlewareResult> {\n    const [request, event] = args;\n    const { pathname } = request.nextUrl;\n\n    if (middleware) {\n      return middleware(...args);\n    }\n  };\n};\nexport { createAuthMiddleware };\n'})})]})}function p(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>s,x:()=>i});var t=n(6540);const a={},d=t.createContext(a);function s(e){const r=t.useContext(d);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function i(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),t.createElement(d.Provider,{value:r},e.children)}}}]);